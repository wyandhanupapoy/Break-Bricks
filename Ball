#include "ball.h"

void InitBalls(Ball balls[ROWS][COLS]) {
    for (int i = 0; i < ROWS; i++) {
        for (int j = 0; j < COLS; j++) {
            balls[i][j].position = (Vector2){400 + j * 20, 300 + i * 20}; // Posisi awal sedikit berbeda untuk tiap bola
            balls[i][j].speed = (Vector2){4, -4}; // Kecepatan awal
            balls[i][j].radius = 10;
            balls[i][j].color = RED;
        }
    }
}

void UpdateBalls(Ball balls[ROWS][COLS]) {
    for (int i = 0; i < ROWS; i++) {
        for (int j = 0; j < COLS; j++) {
            balls[i][j].position.x += balls[i][j].speed.x;
            balls[i][j].position.y += balls[i][j].speed.y;
            
            // Pantulan dinding kiri & kanan
            if (balls[i][j].position.x - balls[i][j].radius <= 0 || 
                balls[i][j].position.x + balls[i][j].radius >= 800) {
                balls[i][j].speed.x *= -1;
            }

            // Pantulan dinding atas
            if (balls[i][j].position.y - balls[i][j].radius <= 0) {
                balls[i][j].speed.y *= -1;
            }
        }
    }
}

void DrawBalls(Ball balls[ROWS][COLS]) {
    for (int i = 0; i < ROWS; i++) {
        for (int j = 0; j < COLS; j++) {
            DrawCircleV(balls[i][j].position, balls[i][j].radius, balls[i][j].color);
        }
    }
}
